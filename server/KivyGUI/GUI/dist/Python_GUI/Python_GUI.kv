#:import utils kivy.utils
#:import md_icons kivymd.icon_definitions.md_icons


MDScreen:
    input: command_input
    RelativeLayout:
        size: root.width, root.height
        orientation: 'vertical'

        CanvasBox:
            size_hint:(1,0.1)
            pos_hint: {'x': 0, 'y': 0.92}

        Label:
            text: "Server Settings"
            font_size:32
            size_hint:(0.1,0.1)
            pos_hint: {'center_x': 0.5, 'y': 0.91}
            color: 1,1,1,1
            
        MDIcon:
            id: wifi1
            icon: 'wifi'
            size_hint:(0.1,0.1)
            pos_hint: {"x": .625, "y": .91}
            color: 1,1,1,0.6
        
        MDIcon:
            id: wifi2
            icon: 'wifi'
            size_hint:(0.1,0.1)
            pos_hint: {"x": .355, "y": .91}
            color: 1,1,1,0.6

            
        MDSwitch:
            id: switch
            height:dp(50)
            width: dp(70)
            pos_hint: {'x': 0.915, 'y': 0.9225}
            on_active: app.switchPress(self, self.active)
            #selected_color: 1,0,0,1   
          
        Label:
            markup: True
            font_size:20
            size_hint:(0.1,0.1)
            pos_hint: {'x': 0.82, 'y': 0.90}
            color: 0,0,0,1
            text: 'Server is [color=#a3e7d0]online[/color]' if switch.active else 'Server is [color=#cc0000]offline[/color]'

        RelativeLayout:
            MDScreen:
                size_hint:(0.59,0.18)
                pos_hint: {'x': 0.03, 'y': 0.72}
                md_bg_color: utils.get_color_from_hex('b3b5b0')
                radius: [25, 15, 25, 15]

            MDScreen:
                size_hint:(0.59,0.065)
                pos_hint: {'x': 0.03, 'y': 0.835}
                md_bg_color: utils.get_color_from_hex('323232')
                radius: [25, 15, 0, 0]

            Label:
                font_size:18
                size_hint:(0.1,0.1)
                pos_hint: {'x': 0.06, 'y': 0.815}
                text: "Commponent Control"
                font_size:24
                color: utils.get_color_from_hex('01bd7d')
            
            MDRaisedButton:
                id: init
                text:"Initialization"
                text_color: 1,1,1,1
                font_size:18
                disabled: False
                size_hint:(0.15,0.05)
                pos_hint: {'x': 0.05, 'y': 0.75}
                md_bg_color: utils.get_color_from_hex('01bd7d')
                on_press: app.button_press(self, "init") 
            
            MDRaisedButton:
                id: reset
                text: "Reset"
                text_color: 1,1,1,1
                font_size:18
                disabled: False
                size_hint:(0.15,0.05)
                pos_hint: {'x': 0.25, 'y': 0.75}   
                md_bg_color: utils.get_color_from_hex('01bd7d')
                on_press: app.button_press(self, "reset") 
            
            MDRaisedButton:
                id: update
                text: "Update"
                text_color: 1,1,1,1
                font_size:18
                disabled: False
                size_hint:(0.15,0.05)
                pos_hint: {'x': 0.45, 'y': 0.75}   
                md_bg_color: utils.get_color_from_hex('01bd7d')
                on_press: app.update_press(self, "update" )

        RelativeLayout:
            spacing:100

            MDTextField:
                id: command_input
                multiline: False
                font_size:18
                size_hint_x:.415
                pos_hint: {'x': 0.05, 'y': 0.62}
                helper_text_mode: "persistent"
                text_color_normal: utils.get_color_from_hex('7f7f7f')
                text_color_focus: 1,1,1,1

                hint_text: "Type in a server command ..."
                hint_text_color_focus: utils.get_color_from_hex('4dd0a4')
                
                line_color_normal: utils.get_color_from_hex('01bd7d')
                line_color_focus: utils.get_color_from_hex('4dd0a4')
                
                icon_right: "arrow-right"
                icon_right_color_normal: utils.get_color_from_hex('01bd7d')
                icon_right_color_focus: utils.get_color_from_hex('4dd0a4')
            
            MDIconButton:
                icon: "arrow-right"
                pos_hint: {'x': 0.44, 'y': 0.64}
                on_press: app.server_command(self, "command_input")
                opacity: 0
            
        RelativeLayout:
            padding:10

            MDScreen:
                size_hint:(0.63,0.56)
                pos_hint: {'x': 0.03, 'y': 0.035}
                md_bg_color: utils.get_color_from_hex('b3b5b0')
                radius: [25, 15, 25, 15]

            MDScreen:
                size_hint:(0.63,0.065)
                pos_hint: {'x': 0.03, 'y': 0.535}
                md_bg_color: utils.get_color_from_hex('323232')
                radius: [25, 15, 0, 0]

            MDIcon:
                size_hint:(0.1,0.05)
                pos_hint: {'x': 0.635, 'y': 0.54}
                icon: 'power'

            Label:
                text: "Socket Log"
                size_hint:(0.1,0.05)
                pos_hint: {'x': 0.03, 'y': 0.54}
                font_size:24
                color: utils.get_color_from_hex('01bd7d')

            ScrollView:
                size_hint:(0.6,0.483)
                pos_hint: {'x': 0.05, 'y': 0.05}
                do_scroll_x: False
                do_scroll_y: True
                bar_color: 0,0,0,0.5

                Label:
                    id: socket_log
                    font_size: 18 
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    padding: 10, 10
                    color: utils.get_color_from_hex('cc0000')
                    text: 'Connection to the server necessary'

        RelativeLayout:
            padding:10

            MDScreen:
                size_hint:(0.23,0.3)
                pos_hint: {'x': 0.74, 'y': 0.61}
                md_bg_color: utils.get_color_from_hex('b3b5b0')
                radius: [25, 15, 25, 15]

            MDScreen:
                size_hint:(0.23,0.3)
                pos_hint: {'x': 0.74, 'y': 0.24}
                md_bg_color: utils.get_color_from_hex('b3b5b0')
                radius: [25, 15, 25, 15]

            MDScreen:
                size_hint:(0.23,0.065)
                pos_hint: {'x': 0.74, 'y': 0.475}
                md_bg_color: utils.get_color_from_hex('323232')
                radius: [25, 15, 0, 0]

            MDScreen:
                size_hint:(0.23,0.065)
                pos_hint: {'x': 0.74, 'y': 0.845}
                md_bg_color: utils.get_color_from_hex('323232')
                radius: [25, 15, 0, 0]

            MDIconButton:
                icon: "odnoklassniki"
                pos_hint: {'x': 0.94, 'y': 0.85}
                on_press: app.update_User()

            MDIconButton:
                icon: 'devices'
                pos_hint: {'x': 0.94, 'y': 0.475}
                on_press: app.update_Components()

            Label:
                text: "User Log"
                size_hint:(0.1,0.05)
                pos_hint: {'x': 0.725, 'y': 0.85}
                font_size:24
                color: utils.get_color_from_hex('01bd7d')
            
            ScrollView:
                size_hint:(0.2,0.22)
                pos_hint: {'x': 0.75, 'y': 0.62}
                do_scroll_x: False
                do_scroll_y: True
                bar_color: 0,0,0,0.5

                Label:
                    id: user_log
                    font_size: 18 
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    color: utils.get_color_from_hex('cc0000')
                    padding: 10, 10
                    text: 'Connection to the server necessary'

            Label:
                text: "Component Log"
                size_hint:(0.1,0.05)
                pos_hint: {'x': 0.745, 'center_y': 0.50}
                font_size:24
                color: utils.get_color_from_hex('01bd7d')

            ScrollView:
                size_hint:(0.2,0.22)
                pos_hint: {'x': 0.75, 'y': 0.25}
                do_scroll_x: False
                do_scroll_y: True
                bar_color: 0,0,0,0.5

                Label:
                    id: component_log
                    font_size: 18 
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    color: utils.get_color_from_hex('cc0000')
                    padding: 10, 10
                    text: 'Connection to the server necessary'

<RoundedButton@Button>
    background_color: (0,0,0,0)
    background_normal:''
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex('01bd7d')
        RoundedRectangle:
            size:self.size
            pos: self.pos
            radius:[20]

<CanvasBox@Widget>
    canvas:
        Color: 
            rgba: utils.get_color_from_hex('01bd7d')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: 0,0,0,0


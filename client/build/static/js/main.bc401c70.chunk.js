(this["webpackJsonpxrtl-spa"]=this["webpackJsonpxrtl-spa"]||[]).push([[0],{101:function(e,t,n){e.exports={consoleContainer:"Console_consoleContainer__1dDWk",consoleMain:"Console_consoleMain__SxxQK",consoleHandler:"Console_consoleHandler__2f7jk",openConsole:"Console_openConsole__1E2CK",closeConsole:"Console_closeConsole__1Gp8h"}},103:function(e,t,n){e.exports={window:"Window_window__eoZ4W",windowHeader:"Window_windowHeader__2vHd6",windowFooter:"Window_windowFooter__3xtgO"}},120:function(e,t,n){e.exports={rotaryCtrl:"RotaryCtrl_rotaryCtrl__1dFJs",CtrlLeft:"RotaryCtrl_CtrlLeft__1Oq_0",CtrlRight:"RotaryCtrl_CtrlRight__RbI2j"}},155:function(e,t,n){e.exports={login:"Login_login__1DZpm",close:"Login_close__jc06k",popupWindow:"Login_popupWindow__2XsJg",popupInner:"Login_popupInner__1U9Rq"}},188:function(e,t,n){e.exports={navbar:"NavBar_navbar__2NK8m",navMenu:"NavBar_navMenu__DRNeT"}},194:function(e,t,n){e.exports={UpDown:"Settings_UpDown__1XZ21",LeftRight:"Settings_LeftRight__NUQR3"}},195:function(e,t,n){e.exports={Canvas:"Stream_Canvas__pCA10",Settings:"Stream_Settings__2Zsif"}},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return b}));var o=n(8),c=n(1),a=n(27),s=n(196),i=n(2),r=new s.a("",{autoConnect:!1}),l=r.socket("/"),d=Object(c.createContext)(),j=n(317);function u(){return Object(c.useContext)(d)}function b(e){var t=e.children,n=Object(c.useState)(!1),u=Object(o.a)(n,2),b=u[0],m=u[1],h=Object(c.useState)(""),O=Object(o.a)(h,2),p=O[0],f=O[1],g=Object(c.useState)(""),x=Object(o.a)(g,2),S=x[0],w=x[1],v=Object(c.useState)("white"),C=Object(o.a)(v,2),y=C[0],k=C[1],_=Object(a.b)();Object(c.useEffect)((function(){l.on("connect",(function(e){m(!0),_.addLog("Server : Client connected to "+S)})),l.on("disconnect",(function(e){m(!1),_.addLog("Server : Client disconnect.")}))}));var I=function(e,t){l.disconnect(),r=new s.a(e,{autoConnect:!1}),l=r.socket("/"),d=Object(c.createContext)(),w(e),f(t)};return Object(i.jsx)(d.Provider,{value:{socket:l,connected:b,toggleConnection:function(e){if(b)m(!1),f(""),I(""),l.close(),_.addLog("Client disconnected by choice.");else{var t={sub:e,component:"client",iat:Date.now(),exp:Date.now()+36e5},n=j.sign(t,"keysecret");l.auth={token:n},l.connect(),m(!0),_.addLog("Client connected by choice.")}},setNewURL:I,setNewFont:function(e){k(e)},username:p,fontColor:y},children:t})}},266:function(e,t,n){"use strict";(function(e){var o=n(267),c=n(271),a=n(273),s=n(274),i=n(290),r=n(25),l=n(27),d=n(289),j=n(35),u=n(2);t.a=function(){return e.title="XRTLApp",Object(u.jsx)(l.a,{children:Object(u.jsxs)(r.a,{children:[Object(u.jsx)(i.a,{}),Object(u.jsxs)(j.a,{children:[Object(u.jsx)(d.a,{}),Object(u.jsx)(c.a,{}),Object(u.jsx)(a.a,{}),Object(u.jsx)(o.a,{}),Object(u.jsx)(s.a,{})]})]})})}}).call(this,n(34))},267:function(e,t,n){"use strict";var o=n(80),c=n(25),a=n(27),s=n(148),i=n(87),r=n(146),l=n(147),d=n(188),j=n.n(d),u=n(270),b=n(1),m=n(41),h=n(2),O=function(){var e=Object(a.b)(),t=Object(c.b)(),n="";t.connected&&(n="white");var d="";e.autoRotate&&(d="white");var b="";e.showTags&&(b="white");var m="";e.showWebcam&&(m="white");var O="";e.showBeam&&(O="white");var p="";return e.showInfoWindow&&(p="white"),Object(h.jsxs)("div",{id:"navbar",className:j.a.navbar,children:[Object(h.jsx)("h1",{children:"XR TwinLab"}),Object(h.jsx)("div",{className:j.a.navMenu,children:Object(h.jsxs)("ul",{children:[Object(h.jsx)(i.a,{title:"Connnection",children:Object(h.jsx)("li",{onClick:function(){t.connected?t.toggleConnection():e.toggleLogin()},children:Object(h.jsx)(r.b,{size:29,color:n})})}),Object(h.jsx)(i.a,{title:"2D model",children:Object(h.jsx)("li",{onClick:e.toggleShowVirtualLayer,children:Object(h.jsx)(l.a,{size:26})})}),Object(h.jsx)(i.a,{title:"Laser beam",children:Object(h.jsx)("li",{onClick:e.toggleShowBeam,children:Object(h.jsx)(s.a,{size:29,color:O})})}),Object(h.jsx)(i.a,{title:"Rotation",children:Object(h.jsx)("li",{onClick:e.toggleAutoRotate,children:Object(h.jsx)(o.d,{size:26,color:d})})}),Object(h.jsx)(i.a,{title:"Labels",children:Object(h.jsx)("li",{onClick:e.toggleShowTags,children:Object(h.jsx)(u.a,{size:25,color:b})})}),Object(h.jsx)(i.a,{title:"Webcam",children:Object(h.jsx)("li",{onClick:e.toggleShowWebcam,children:Object(h.jsx)(l.b,{size:26,color:m})})}),Object(h.jsx)(i.a,{title:"Information",children:Object(h.jsx)("li",{onClick:e.toggleShowInfoWindow,children:Object(h.jsx)(o.a,{size:26,color:p})})})]})})]})};t.a=Object(b.memo)(O,m.isEqual)},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var o=n(24),c=n(8),a=n(1),s=n.n(a),i=n(2),r=s.a.createContext();function l(){return Object(a.useContext)(r)}function d(e){var t=e.children,n=Object(a.useState)(!1),s=Object(c.a)(n,2),l=s[0],d=s[1],j=Object(a.useState)(!0),u=Object(c.a)(j,2),b=u[0],m=u[1],h=Object(a.useState)(new Set),O=Object(c.a)(h,2),p=O[0],f=O[1],g=Object(a.useState)(new Set),x=Object(c.a)(g,2),S=x[0],w=x[1],v=Object(a.useState)([]),C=Object(c.a)(v,2),y=C[0],k=C[1],_=Object(a.useState)(!0),I=Object(c.a)(_,2),M=I[0],L=I[1],R=Object(a.useState)(!1),N=Object(c.a)(R,2),P=N[0],D=N[1],T=Object(a.useState)(!1),B=Object(c.a)(T,2),H=B[0],E=B[1],U=Object(a.useState)(!1),F=Object(c.a)(U,2),z=F[0],W=F[1];return Object(i.jsx)(r.Provider,{value:{autoRotate:l,toggleAutoRotate:function(){d(!l)},showVirtualLayer:b,toggleShowVirtualLayer:function(){m(!b)},selectedComps:p,toggleSelectedComp:function(e){p.has(e)?f((function(t){return new Set(Object(o.a)(t).filter((function(t){return t!==e})))})):f((function(t){return new Set(t.add(e))}))},logs:y,addLog:function(e){k((function(t){return[e].concat(Object(o.a)(t))}))},busyComps:S,addBusyComp:function(e){S.has(e)||w((function(t){return new Set(t.add(e))}))},removeBusyComp:function(e){S.has(e)&&w((function(t){return new Set(Object(o.a)(t).filter((function(t){return t!==e})))}))},showTags:M,toggleShowTags:function(){L(!M)},showBeam:z,toggleShowBeam:function(){W(!z)},showLogin:P,setShowLogin:D,showInfoWindow:H,toggleShowInfoWindow:function(){E(!H)},toggleLogin:function(){D(!P)}},children:t})}},271:function(e,t,n){"use strict";var o=n(8),c=n(1),a=n(272),s=n(101),i=n.n(s),r=n(27),l=n(41),d=n(2),j=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),s=n[0],l=n[1],j=Object(c.useState)(""),u=Object(o.a)(j,2),b=u[0],m=u[1],h=Object(r.b)();return Object(d.jsxs)("div",{className:i.a.consoleContainer+" "+b,children:[Object(d.jsx)("div",{className:i.a.consoleMain,children:h.logs.map((function(e,t){return Object(d.jsxs)("span",{children:[e,Object(d.jsx)("br",{})]},t)}))}),Object(d.jsx)("div",{className:i.a.consoleHandler,children:Object(d.jsx)("span",{children:Object(d.jsx)(a.a,{size:35,onClick:function(){m(s?i.a.closeConsole:i.a.openConsole),l(!s)}})})})]})};t.a=Object(c.memo)(j,l.isEqual)},273:function(e,t,n){"use strict";var o=n(24),c=n(8),a=n(1),s=n(86),i=n.n(s),r=n(146),l=n(80),d=n(25),j=n(41),u=n(2),b=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),s=n[0],j=n[1],b=Object(a.useState)(!1),m=Object(c.a)(b,2),h=m[0],O=m[1],p=Object(a.useState)(""),f=Object(c.a)(p,2),g=f[0],x=f[1],S=Object(a.useState)([]),w=Object(c.a)(S,2),v=w[0],C=w[1],y=Object(d.b)(),k=Object(a.useRef)();k.current=function(){y.socket.on("message",(function(e){C([].concat(Object(o.a)(v),[e]))}))},Object(a.useEffect)((function(){k.current()}),[y,v]);return Object(u.jsxs)("div",{className:i.a.chatContainer+" "+g,children:[Object(u.jsx)("div",{className:i.a.chatMain,children:v.map((function(e,t){return Object(u.jsxs)("b",{children:[Object(u.jsxs)("span",{style:{color:e.color},children:[" ",e.userId,":"]})," ",Object(u.jsx)("span",{children:e.message}),Object(u.jsx)("br",{})]},t)}))}),Object(u.jsxs)("form",{className:i.a.msgForm,onSubmit:function(e){e.preventDefault(),y.socket.emit("message",{userId:y.username,message:s,color:y.fontColor}),j("")},children:[Object(u.jsx)("input",{type:"text",name:"message",placeholder:"Type Message here",value:s,onChange:function(e){j(e.target.value)},required:!0}),Object(u.jsx)("button",{type:"submit",children:Object(u.jsx)(l.e,{size:25})})]}),Object(u.jsx)("div",{className:i.a.chatHandler+" "+g,children:Object(u.jsx)("span",{children:Object(u.jsx)(r.a,{size:35,onClick:function(){x(h?i.a.closeChat:i.a.openChat),O(!h)}})})})]})};t.a=Object(a.memo)(b,j.isEqual)},274:function(e,t,n){"use strict";var o=n(23),c=n(8),a=n(197),s=n(450),i=n(297),r=n(198),l=n(296),d=n(451),j=n(445),u=n(449),b=n(275),m=n.n(b),h=n(276),O=n.n(h),p=n(441),f=n(25),g=n(27),x=n(277),S=n.n(x),w=n(1),v=n(155),C=n.n(v),y=n(41),k=n(2),_=function(e){var t=["IndianRed","FireBrick","MediumVioletRed","HotPink","Coral","DarkOrange","Yellow","Khaki","Plum","DarkOrchid","ForestGreen","DarkOliveGreen","LightGreen","Teal","Aqua","Blue","LightSkyBlue"],n=Object(w.useState)("white"),b=Object(c.a)(n,2),h=b[0],x=b[1],v=Object(w.useState)(null),y=Object(c.a)(v,2),_=y[0],I=y[1],M=Object(w.useState)(""),L=Object(c.a)(M,2),R=L[0],N=L[1],P=Object(p.a)(),D=Object(f.b)(),T=Object(g.b)(),B=Object(a.a)({palette:{mode:"dark",primary:{light:"#01bd7d",main:"#01bd7d",dark:"#01bd7d",contrastText:"#fff"}},spacing:2}),H=function(){if(""!==R)try{D.setNewURL(String(_.title),String(R)),D.toggleConnection(String(R)),T.setShowLogin(!1)}catch(e){}};return T.showLogin?Object(k.jsxs)(s.a,{theme:B,children:[Object(k.jsx)("div",{className:C.a.popupWindow}),Object(k.jsxs)("div",{className:C.a.popupInner,children:[Object(k.jsx)("h3",{title:"settings",children:"Settings"}),Object(k.jsx)("div",{className:C.a.close,children:Object(k.jsx)(i.a,{onClick:function(e){T.setShowLogin(!1)},children:Object(k.jsx)(m.a,{fontSize:"large"})})}),Object(k.jsxs)(r.a,{container:!0,columnSpacing:{md:95},children:[Object(k.jsx)(r.a,{item:!0,xs:6,children:Object(k.jsx)(l.a,{autoFocus:!0,variant:"outlined",label:"Username ",value:R,onChange:function(e){N(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&H()},style:{marginLeft:17,width:250},error:""===R,helperText:""===R?"Please enter your username!":" "})}),Object(k.jsx)(r.a,{item:!0,xs:6,children:Object(k.jsx)(i.a,{onClick:function(e){t=t[Math.floor(16*Math.random())],document.getElementById("colorIcon").style.color=t,x(t),D.setNewFont(t)},children:Object(k.jsx)(O.a,{id:"colorIcon",color:h,fontSize:"large"})})})]}),Object(k.jsx)(d.a,{sx:{m:8,width:250},children:Object(k.jsx)(j.a,{value:_,freeSolo:!0,renderInput:function(e){return Object(k.jsx)(l.a,Object(o.a)(Object(o.a)({},e),{},{label:"Choose server address "}))},onChange:function(e,t){"string"===typeof t?I({title:t}):t&&t.inputValue?I({title:t.inputValue}):I(t)},onKeyPress:function(e){"Enter"===e.key&&H()},filterOptions:function(e,t){var n=P(e,t),o=t.inputValue,c=e.some((function(e){return o===e.title}));return""===o||c||n.push({inputValue:o,title:'Add "'.concat(o,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:[{title:"http://localhost:7000"},{title:"http://192.168.1.42:7000"},{title:"http://10.232.37.40:7000"}],getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},renderOption:function(e,t){return Object(k.jsx)("li",Object(o.a)(Object(o.a)({},e),{},{children:t.title}))}})}),Object(k.jsx)(u.a,{size:"small",type:"submit",variant:"contained",onClick:H,endIcon:Object(k.jsx)(S.a,{}),style:{width:90,height:30,marginTop:-3,marginLeft:270},children:"Login"})]})]}):Object(k.jsx)("div",{})};t.a=Object(w.memo)(_,y.isEqual)},282:function(e,t,n){e.exports={popUp:"PopUp_popUp__IolRq"}},288:function(e,t,n){e.exports={mainWrapper:"InfoWindowContent_mainWrapper__345Fv"}},289:function(e,t,n){"use strict";var o=n(8),c=n(1),a=n.n(c),s=n(191),i=n(281),r=n(103),l=n.n(r),d=n(280),j=n.n(d),u=n(41),b=n(2),m=function(e){return Object(b.jsx)(j.a,{handle:".draggableHandler",children:Object(b.jsxs)("div",{className:l.a.window,style:{top:e.top+"px",left:e.left+"px"},children:[Object(b.jsxs)("div",{className:l.a.windowHeader,children:[Object(b.jsx)("span",{className:"draggableHandler",style:{display:"block",width:"calc(100% - 50px)",cursor:"move",float:"left"},children:e.header}),Object(b.jsxs)("span",{onClick:e.onReset,children:[" ",Object(b.jsx)(s.b,{size:20}),"        "]}),Object(b.jsx)("span",{onClick:e.onClose,children:Object(b.jsx)(i.a,{size:20})})]}),Object(b.jsx)("div",{className:l.a.windowContent,style:{height:e.height,width:e.width,background:"url("+e.background+")"},children:e.children}),void 0!==e.footer&&Object(b.jsxs)("div",{className:l.a.windowFooter,children:[Object(b.jsxs)("span",{onClick:e.onInfo,children:[" ",Object(b.jsx)(s.a,{size:25})]}),Object(b.jsx)("label",{children:e.footer})]}),Object(b.jsx)("div",{className:l.a.windowInfo})]})})},h=Object(c.memo)(m,u.isEqual),O=n(27),p=n(35),f=n(25),g=function(e){var t,n=Object(f.b)(),o=Object(c.useRef)();n.socket.emit("viewer",e.component);return o.current=function(){document.getElementById("video").setAttribute("style","display: true"),n.socket.emit("viewer",e.component),n.socket.on("offer",(function(o){t=e.peer,console.log(t),t.setRemoteDescription(o.data).then((function(){return t.createAnswer()})).then((function(e){return t.setLocalDescription(e)})).then((function(){return n.socket.emit("answer",{id:o.id,data:t.localDescription})})),t.ontrack=function(e){document.getElementById("video").srcObject=e.streams[0]},t.onicecandidate=function(e){e.candidate&&n.socket.emit("candidate",{id:o.id,data:e.candidate})}})),n.socket.on("candidate",(function(e){t.addIceCandidate(new RTCIceCandidate(e.data)).catch((function(e){return console.error(e)}))}))},Object(c.useEffect)((function(){o.current()}),[]),Object(b.jsx)("div",{children:Object(b.jsx)("video",{className:"video",id:"video",autoPlay:!0,playsInline:!0,width:"640px",height:"480px"})})},x=function(e){var t=Object(c.useState)(e.footer),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(["","",""]),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)("info"),u=Object(o.a)(j,2),m=u[0],x=u[1],S=Object(c.useState)(!1),w=Object(o.a)(S,2),v=w[0],C=w[1],y=Object(c.useState)(!1),k=Object(o.a)(y,2),_=k[0],I=k[1],M=Object(O.b)(),L=Object(f.b)(),R=Object(p.b)(),N=Object(c.useRef)(),P=Object(c.useRef)(),D=new RTCPeerConnection({iceServers:[{urls:["stun:stun.stunprotocol.org"]}]});return N.current=function(){L.socket.on("data",(function(e){console.log("Data payload",e)}))},P.current=function(){L.socket.emit("join stream room",{id:e.id,userId:L.username})},Object(c.useEffect)((function(){N.current()}),[L.socket]),Object(c.useEffect)((function(){P.current()}),[]),Object(b.jsx)(h,{header:e.title+" ("+e.id+")",top:e.top,left:e.left,height:"480px",width:"620px",onClose:function(){M.toggleSelectedComp(e.id),D.close(),L.socket.emit("watcher disconnect")},onReset:function(){L.socket.emit("command",{userId:L.username,componentId:e.id,command:"reset"})},onInfo:function(){var e,t,n=new Date,o=0;v="",n=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getDay(),n.getMonth()],""===l[0]?v="No last change detected!":n[0]>l[0]?(e=n[0]-l[0],v="Last change is more than "+e+" h ago!"):n[0]===l[0]&&n[1]===l[1]&&n[2]>l[2]?(o=n[2]-l[2],v="Last change is "+o+" s ago!"):n[0]===l[0]&&n[1]>l[1]?(t=n[1]-l[1],v="Last change is more than "+t+" min ago!"):v=n[3]>l[3]||n[4]>l[4]?"Last change is more than 24 h ago!":"No last change detected!",C(v),x("info"),R.toggleShowPopUp(v,m)},footer:a,children:Object(b.jsx)(g,{peer:D,component:e.id,newStatus:function(e){if(!_){_=!0,I(!0);var t=new Date;d([t.getHours(),t.getMinutes(),t.getSeconds(),t.getDay(),t.getMonth()]),s(e)}return function(){_=!1,I(!1)}},footer:a})})},S=n(197),w=n(450),v=n(148),C=n(451),y=n(5),k=n(515),_=n(501),I=n(516),M=n(509),L=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(O.b)(),r=Object(f.b)(),l=Object(c.useRef)();l.current=function(){r.socket.on("status",(function(t){t.component===e.component&&s(t.status[e.control])}))},Object(c.useEffect)((function(){l.current()}),[r.socket]);return Object(b.jsx)(C.a,{sx:{width:250,m:2},children:Object(b.jsx)(k.a,{children:Object(b.jsxs)(_.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(b.jsx)(I.a,{children:e.start}),Object(b.jsx)(M.a,{checked:a,onChange:function(t,n){s(n),r.socket.emit("command",{userId:r.username,componentId:e.component,command:Object(y.a)({controlId:e.command},e.option,n)}),r.socket.emit("footer",{status:"Last change by: "+r.username,componentId:e.component}),i.addLog("User set switch on "+e.component+" to "+a);try{e.icon.style.color=!0===a?"grey":"white"}catch(o){}},inputProps:{"aria-label":"controlled"},disabled:!(r.connected&&!i.busyComps.has(e.component)&&e.online)}),Object(b.jsx)(I.a,{children:e.end})]})})})},R=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(f.b)(),u=Object(c.useRef)(),m=Object(O.b)(),h=Object(S.a)({palette:{mode:"dark",primary:{light:"#01bd7d",main:"#01bd7d",dark:"#01bd7d",contrastText:"#fff"}}});return u.current=function(){j.socket.emit("command",{userId:j.username,componentId:e.component,command:"getStatus"}),j.socket.on("status",(function(t){t.componentId===e.component&&s(t.status.laser)})),j.socket.on("footer",(function(t){t.componentId===e.component&&e.newStatus(String(t.status))})),j.socket.emit("getFooter",e.component),j.socket.on("getFooter",(function(t){t.componentId===e.component&&(d(!t.online),e.newStatus(String(t.status)))})),m.addLog("User set position on "+e.component+" to "+a)},Object(c.useEffect)((function(){u.current()}),[j.socket]),Object(b.jsx)("div",{className:"switchOnOff",children:Object(b.jsx)(w.a,{theme:h,children:Object(b.jsxs)(C.a,{sx:{m:2,width:250},children:[Object(b.jsx)(L,{component:e.component,command:"switch",start:"Off",end:"On",checked:a,icon:document.getElementById("icon"),online:l,option:"val"}),Object(b.jsx)(v.a,{id:"icon",size:100,"vertical-align":"middle",color:"grey"})]})})})},N=function(e){var t=Object(c.useState)(e.footer),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(["","",""]),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)("info"),u=Object(o.a)(j,2),m=u[0],g=u[1],x=Object(c.useState)(!1),S=Object(o.a)(x,2),w=S[0],v=S[1],C=Object(c.useState)(!1),y=Object(o.a)(C,2),k=y[0],_=y[1],I=Object(O.b)(),M=Object(f.b)(),L=Object(p.b)(),N=function(e){if(!k){k=!0,_(!0);var t=new Date;d([t.getHours(),t.getMinutes(),t.getSeconds(),t.getDay(),t.getMonth()]),s(e)}return function(){k=!1,_(!1)}};return Object(b.jsx)(h,{header:e.title+" ("+e.id+")",top:e.top,left:e.left,height:"200px",width:"300px",onClose:function(){I.toggleSelectedComp(e.id)},onReset:function(){M.socket.emit("command",{userId:M.username,componentId:e.id,command:"reset"})},onInfo:function(){var e,t,n=new Date,o=0;w="",n=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getDay(),n.getMonth()],""===l[0]?w="No last change detected!":n[0]>l[0]?(e=n[0]-l[0],w="Last change is more than "+e+" h ago!"):n[0]===l[0]&&n[1]===l[1]&&n[2]>l[2]?(o=n[2]-l[2],w="Last change is "+o+" s ago!"):n[0]===l[0]&&n[1]>l[1]?(t=n[1]-l[1],w="Last change is more than "+t+" min ago!"):w=n[3]>l[3]||n[4]>l[4]?"Last change is more than 24 h ago!":"No last change detected!",v(w),g("info"),L.toggleShowPopUp(w,m)},newStatus:N,footer:a,children:Object(b.jsx)(R,{component:e.id,top:"0",left:"0",newStatus:N,footer:a})})},P=n(283),D=n.n(P),T=n(193),B=n.n(T),H=n(192),E=n.n(H),U=n(505),F=function(e){var t=Object(c.useState)(e.sliderPos),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(O.b)(),r=Object(f.b)(),l=Object(c.useRef)(),d=[{value:parseInt(e.min),label:e.min},{value:0,label:"0"},{value:parseInt(e.max),label:e.max}];l.current=function(){r.socket.on("status",(function(t){t.component===e.component&&s(t.status[e.control])}))},Object(c.useEffect)((function(){l.current()}),[r.socket]);var j=function(t,n){r.socket.emit("command",{userId:r.username,componentId:e.component,command:Object(y.a)({controlId:e.command},e.option,n)}),r.socket.emit("footer",{status:"Last change by: "+r.username,componentId:e.component}),i.addLog("User set position on "+e.component+" to "+a)};return e.text?Object(b.jsxs)(C.a,{sx:{width:250,m:2},children:[Object(b.jsx)(I.a,{id:"input-slider",gutterBottom:!0,children:e.title}),Object(b.jsx)(_.a,{spacing:2,direction:"row",sx:{mb:1},alignItems:"center",children:Object(b.jsx)(U.a,{"aria-label":"Temperature",id:"brightnessSlider",defaultValue:0,valueLabelDisplay:"auto",step:1,min:e.min,max:e.max,value:a,onChangeCommitted:j,marks:e.text,disabled:!(r.connected&&!i.busyComps.has(e.component)&&e.online)})})]}):Object(b.jsxs)(C.a,{sx:{width:250,m:2},children:[Object(b.jsx)(I.a,{id:"input-slider",gutterBottom:!0,children:e.title}),Object(b.jsx)(_.a,{spacing:2,direction:"row",sx:{mb:1},alignItems:"center",children:Object(b.jsx)(U.a,{"aria-label":"Temperature",id:"brightnessSlider",defaultValue:0,valueLabelDisplay:"auto",step:1,min:e.min,max:e.max,value:a,onChangeCommitted:j,marks:d,disabled:!(r.connected&&!i.busyComps.has(e.component)&&e.online)})})]})},z=n(513),W=n(508),A=n(503),q=n(506),V=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(f.b)(),r=Object(O.b)(),l=function(t,n){s(n.props.value),i.socket.emit("command",{userId:i.username,componentId:e.component,command:Object(y.a)({controlId:e.command},e.option,n.props.value)}),i.socket.emit("footer",{status:"Last change by: "+i.username,componentId:e.component}),r.addLog("User set switch on "+e.component+" to "+a)};return"Average time (ms)"===e.title?Object(b.jsxs)(A.a,{value:a,label:e.title,onChange:l,disabled:!(i.connected&&!r.busyComps.has(e.component)&&e.online),children:[Object(b.jsx)(q.a,{value:100,children:"100"}),Object(b.jsx)(q.a,{value:500,children:"500"}),Object(b.jsx)(q.a,{value:1e3,children:"1000"}),Object(b.jsx)(q.a,{value:2e3,children:"2000"})]}):"Update time (s)"===e.title?Object(b.jsxs)(A.a,{value:a,label:e.title,onChange:l,disabled:!(i.connected&&!r.busyComps.has(e.component)&&e.online),children:[Object(b.jsx)(q.a,{value:1e3,children:"100"}),Object(b.jsx)(q.a,{value:5e3,children:"500"}),Object(b.jsx)(q.a,{value:1e4,children:"1000"})]}):Object(b.jsx)("div",{})},G=function(e){return Object(b.jsx)(C.a,{sx:{m:2,width:250},children:Object(b.jsxs)(z.a,{fullWidth:!0,children:[Object(b.jsx)(W.a,{children:e.title}),Object(b.jsx)(V,{title:e.title,component:e.component,online:e.online,command:e.command,option:e.option})]})})},K=n(297),X=n(449),J=n(67),Z=n.n(J),Q=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!0),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)(!1),u=Object(o.a)(j,2),m=u[0],h=u[1],O=Object(c.useState)("-\xb0C"),p=Object(o.a)(O,2),g=p[0],x=p[1],v=Object(f.b)(),y=Object(c.useRef)(),k=Object(S.a)({palette:{mode:"dark",primary:{light:"#01bd7d",main:"#01bd7d",dark:"#01bd7d",contrastText:"#01bd7d"}}}),_=function(){d(!l)};return y.current=function(){return m||(m=!0,h(!0),v.socket.emit("command",{userId:v.username,componentId:e.component,command:"getStatus"}),v.socket.on("footer",(function(t){t.componentId===e.component&&e.newStatus(String(t.status))})),v.socket.emit("getFooter",e.component),v.socket.on("getFooter",(function(t){t.componentId===e.component&&(s(!0),e.newStatus(String(t.status)))})),v.socket.on("data",(function(t){console.log("hier "),t.componentId===e.component&&x(t.data.data)})),v.socket.on("status",(function(t){t.componentId===e.component&&console.log("Status of settings:   ",t)})),m=!1,h(!1)),function(){m=!1,h(!1)}},Object(c.useEffect)((function(){y.current()}),[v.socket]),l?Object(b.jsxs)(w.a,{theme:k,children:[Object(b.jsxs)("div",{className:Z.a.Temp,children:[Object(b.jsx)(I.a,{variant:"h2",children:g}),Object(b.jsx)(K.a,{onClick:_,children:Object(b.jsx)(E.a,{sx:{fontSize:35}})})]}),Object(b.jsx)("div",{className:Z.a.Canvas1,children:Object(b.jsx)("canvas",{id:"Gauge"})}),Object(b.jsx)("div",{className:Z.a.Heater,children:Object(b.jsx)(C.a,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",mt:-2},children:Object(b.jsxs)("div",{style:{paddingLeft:10},children:[Object(b.jsx)(X.a,{sx:{fontSize:17},startIcon:Object(b.jsx)(B.a,{}),children:"Heater settings "}),Object(b.jsx)(F,{title:"Power",component:e.component,command:"output",min:0,max:255,online:a,option:"power"})]})})}),Object(b.jsx)("div",{className:Z.a.Switch,children:Object(b.jsx)(C.a,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:Object(b.jsx)(L,{component:e.component,command:"output",start:"Off",end:"On",online:a,option:"stream"})})})]}):Object(b.jsxs)(w.a,{theme:k,children:[Object(b.jsxs)("div",{className:Z.a.Temp,children:[Object(b.jsx)(I.a,{variant:"h2",children:g}),Object(b.jsx)(K.a,{onClick:_,children:Object(b.jsx)(E.a,{sx:{fontSize:35}})})]}),Object(b.jsx)("div",{className:Z.a.Canvas2,children:Object(b.jsx)("canvas",{id:"Heater"})}),Object(b.jsx)("div",{className:Z.a.Canvas1,children:Object(b.jsx)("canvas",{id:"Gauge"})}),Object(b.jsx)("div",{className:Z.a.Heater,children:Object(b.jsxs)(C.a,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",mt:-2},children:[Object(b.jsxs)("div",{style:{paddingLeft:10},children:[Object(b.jsx)(X.a,{sx:{fontSize:17},startIcon:Object(b.jsx)(B.a,{}),children:"Heater settings "}),Object(b.jsx)(F,{title:"Power",component:e.component,command:"output",min:0,max:255,online:a,option:"power"})]}),Object(b.jsxs)("div",{style:{paddingLeft:20},children:[Object(b.jsx)(X.a,{sx:{fontSize:17},startIcon:Object(b.jsx)(D.a,{}),children:"Gauge settings "}),Object(b.jsx)(G,{title:"Average time (ms)",component:e.component,online:a,command:"thermistor",option:"averageTime"}),Object(b.jsx)(G,{title:"Update time (s)",component:e.component,online:a,command:"thermistor",option:"updateTime"})]})]})}),Object(b.jsx)("div",{className:Z.a.Switch,children:Object(b.jsxs)(C.a,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:[Object(b.jsx)(L,{component:e.component,command:"output",start:"Off",end:"On",online:a,option:"stream"}),Object(b.jsx)(L,{component:e.component,command:"thermistor",start:"Off",end:"On",online:a,option:"val"})]})})]})},Y=function(e){var t=Object(c.useState)(e.footer),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(["","",""]),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)("info"),u=Object(o.a)(j,2),m=u[0],g=u[1],x=Object(c.useState)(!1),S=Object(o.a)(x,2),w=S[0],v=S[1],C=Object(c.useState)(!1),y=Object(o.a)(C,2),k=y[0],_=y[1],I=Object(O.b)(),M=Object(f.b)(),L=Object(p.b)(),R=Object(c.useRef)(),N=Object(c.useRef)();return R.current=function(){M.socket.on("data",(function(e){console.log("Data payload",e)}))},N.current=function(){M.socket.emit("join stream room",{id:e.id,userId:M.username})},Object(c.useEffect)((function(){R.current()}),[M.socket]),Object(c.useEffect)((function(){N.current()}),[]),Object(b.jsx)(h,{header:e.title+" ("+e.id+")",top:e.top,left:e.left,height:"340px",width:"623px",onClose:function(){I.toggleSelectedComp(e.id),M.socket.emit("leave stream room",{id:e.id,userId:M.username})},onReset:function(){M.socket.emit("command",{userId:M.username,componentId:e.id,command:"reset"})},onInfo:function(){var e,t,n=new Date,o=0;w="",n=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getDay(),n.getMonth()],""===l[0]?w="No last change detected!":n[0]>l[0]?(e=n[0]-l[0],w="Last change is more than "+e+" h ago!"):n[0]===l[0]&&n[1]===l[1]&&n[2]>l[2]?(o=n[2]-l[2],w="Last change is "+o+" s ago!"):n[0]===l[0]&&n[1]>l[1]?(t=n[1]-l[1],w="Last change is more than "+t+" min ago!"):w=n[3]>l[3]||n[4]>l[4]?"Last change is more than 24 h ago!":"No last change detected!",v(w),g("info"),L.toggleShowPopUp(w,m)},footer:a,children:Object(b.jsx)(Q,{component:e.id,newStatus:function(e){if(!k){k=!0,_(!0);var t=new Date;d([t.getHours(),t.getMinutes(),t.getSeconds(),t.getDay(),t.getMonth()]),s(e)}return function(){k=!1,_(!1)}},footer:a})})},$=n(80),ee=n(120),te=n.n(ee),ne=function(e){var t,n=Object(c.useState)(0),a=Object(o.a)(n,2),s=a[0],i=a[1],r=Object(c.useState)(!1),l=Object(o.a)(r,2),d=l[0],j=l[1],u=Object(c.useState)(0),m=Object(o.a)(u,2),h=m[0],p=m[1],g=Object(c.useState)(!1),x=Object(o.a)(g,2),S=x[0],w=x[1],v=Object(O.b)(),C=Object(f.b)(),y=Object(c.useRef)();y.current=function(){return S||(S=!0,w(!0),"bottom"!==e.control&&(C.socket.emit("command",{userId:C.username,componentId:e.component,command:"getStatus"}),C.socket.emit("getFooter",e.component),C.socket.on("getFooter",(function(t){t.componentId===e.component&&(console.log(t),j(t.online),e.newStatus(String(t.status)))})),C.socket.on("footer",(function(t){t.componentId===e.component&&"bottom"!==e.control&&(console.log("FOOTER"),e.newStatus(String(t.status)))}))),C.socket.on("status",(function(t){t.componentId===e.component&&("top"===e.control?p(t.status.top.absolute):"bottom"===e.control?p(t.status.bottom.absolute):p(t.status.linear.absolute),t.status.busy||(document.getElementById(e.control+"1").disabled=!1,document.getElementById(e.control+"2").disabled=!1))})),S=!1,w(!1)),function(){S=!1,w(!1)}},Object(c.useEffect)((function(){y.current()}),[C.socket]);var k=function(n){return function(o){o.preventDefault(),t=0,"left"===n?t=-1*Number(s):"right"===n&&(t=Number(s)),0!==t&&(document.getElementById(e.control+"1").disabled=!0,document.getElementById(e.control+"2").disabled=!0,C.socket.emit("command",{userId:C.username,componentId:e.component,command:{controlId:e.control,val:t}}),C.socket.emit("footer",{status:"Last change by: "+C.username,componentId:e.component})),v.addLog("User initiated CW rotation on "+e.component+" / "+e.control+" by "+s+" steps.")}};return Object(b.jsxs)("form",{className:te.a.rotaryCtrl,style:{top:e.top+"px",left:e.left+"px"},children:[Object(b.jsxs)("div",{className:te.a.rotaryCtrl,children:[Object(b.jsx)("span",{children:Number(h)}),Object(b.jsx)("input",{type:"number",min:"0",max:"100",value:s,onChange:function(e){i(e.target.value)}})]}),Object(b.jsx)("button",{id:e.control+"1",onClick:k("left"),className:te.a.CtrlLeft,disabled:!C.connected||!d,children:Object(b.jsx)($.b,{size:28})}),Object(b.jsx)("button",{id:e.control+"2",onClick:k("right"),className:te.a.CtrlRight,disabled:!C.connected||!d,children:Object(b.jsx)($.c,{size:28})})]})},oe=n.p+"static/media/km100_outline.5cffd463.png",ce=function(e){var t=Object(c.useState)(e.footer),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(["","",""]),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)("info"),u=Object(o.a)(j,2),m=u[0],g=u[1],x=Object(c.useState)(!1),S=Object(o.a)(x,2),w=S[0],v=S[1],C=Object(c.useState)(!1),y=Object(o.a)(C,2),k=y[0],_=y[1],I=Object(O.b)(),M=Object(f.b)(),L=Object(p.b)(),R=function(e){if(!k){k=!0,_(!0);var t=new Date;d([t.getHours(),t.getMinutes(),t.getSeconds(),t.getDay(),t.getMonth()]),s(e)}return function(){k=!1,_(!1)}};return Object(b.jsxs)(h,{header:e.title+" ("+e.id+")",footer:a,top:e.top,left:e.left,height:"240px",width:"250px",background:oe,onClose:function(){I.toggleSelectedComp(e.id)},onReset:function(){M.socket.emit("command",{userId:M.username,componentId:e.id,command:"reset"})},onInfo:function(){var e,t,n=new Date,o=0;w="",n=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getDay(),n.getMonth()],""===l[0]?w="No last change detected!":n[0]>l[0]?(e=n[0]-l[0],w="Last change is more than "+e+" h ago!"):n[0]===l[0]&&n[1]===l[1]&&n[2]>l[2]?(o=n[2]-l[2],w="Last change is "+o+" s ago!"):n[0]===l[0]&&n[1]>l[1]?(t=n[1]-l[1],w="Last change is more than "+t+" min ago!"):w=n[3]>l[3]||n[4]>l[4]?"Last change is more than 24 h ago!":"No last change detected!",v(w),g("info"),L.toggleShowPopUp(w,m)},children:[Object(b.jsx)(ne,{rotation:e.rotationTop,component:e.id,control:"top",newStatus:R,footer:a,top:"20",left:"160"}),Object(b.jsx)(ne,{rotation:e.rotationBottom,component:e.id,control:"bottom",newStatus:R,footer:a,top:"50",left:"160"})]})},ae=n.p+"static/media/linear_outline.7ac97702.png",se=function(e){var t=Object(c.useState)(e.footer),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(["","",""]),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)("info"),u=Object(o.a)(j,2),m=u[0],g=u[1],x=Object(c.useState)(!1),S=Object(o.a)(x,2),w=S[0],v=S[1],C=Object(c.useState)(!1),y=Object(o.a)(C,2),k=y[0],_=y[1],I=Object(O.b)(),M=Object(f.b)(),L=Object(p.b)(),R=function(e){if(!k){k=!0,_(!0);var t=new Date;d([t.getHours(),t.getMinutes(),t.getSeconds(),t.getDay(),t.getMonth()]),s(e)}return function(){k=!1,_(!1)}};return Object(b.jsx)(h,{header:e.title+" ("+e.id+")",top:e.top,left:e.left,width:"250px",height:"235px",onClose:function(){I.toggleSelectedComp(e.id)},onReset:function(){M.socket.emit("command",{userId:M.username,componentId:e.id,command:"reset"})},onInfo:function(){var e,t,n=new Date,o=0;w="",n=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getDay(),n.getMonth()],""===l[0]?w="No last change detected!":n[0]>l[0]?(e=n[0]-l[0],w="Last change is more than "+e+" h ago!"):n[0]===l[0]&&n[1]===l[1]&&n[2]>l[2]?(o=n[2]-l[2],w="Last change is "+o+" s ago!"):n[0]===l[0]&&n[1]>l[1]?(t=n[1]-l[1],w="Last change is more than "+t+" min ago!"):w=n[3]>l[3]||n[4]>l[4]?"Last change is more than 24 h ago!":"No last change detected!",v(w),g("info"),L.toggleShowPopUp(w,m)},background:ae,newStatus:R,footer:a,children:Object(b.jsx)(ne,{rotation:e.rotation,component:e.id,newStatus:R,footer:a,control:"linear",top:"35",left:"160"})})},ie=n(285),re=n.n(ie),le=n(284),de=n.n(le),je=function(e){var t=Object(f.b)(),n=Object(O.b)(),o=function(o,c){return function(a){a.preventDefault(),t.socket.emit("command",{userId:t.username,componentId:e.component,command:{controlId:o,val:c?15:-15}}),t.socket.emit("footer",{status:"Last change by: "+t.username,componentId:e.component}),n.addLog("User changed the position on "+e.component)}};return Object(b.jsxs)(C.a,{children:[Object(b.jsx)(K.a,{onClick:o("virtualPan",!1),disabled:!(t.connected&&!n.busyComps.has(e.component)&&e.online),children:Object(b.jsx)(de.a,{})}),Object(b.jsx)(K.a,{onClick:o("virtualPan",!0),disabled:!(t.connected&&!n.busyComps.has(e.component)&&e.online),children:Object(b.jsx)(re.a,{})})]})},ue=n(194),be=n.n(ue),me=n(286),he=n.n(me),Oe=n(287),pe=n.n(Oe),fe=function(e){var t=Object(f.b)(),n=Object(O.b)(),o=function(o,c){return function(a){a.preventDefault(),t.socket.emit("command",{userId:t.username,componentId:e.component,command:{controlId:o,val:c?15:-15}}),t.socket.emit("footer",{status:"Last change by: "+t.username,componentId:e.component}),n.addLog("User changed the position on "+e.component)}};return Object(b.jsxs)(_.a,{children:[Object(b.jsx)(K.a,{onClick:o("virtualTilt",!0),disabled:!(t.connected&&!n.busyComps.has(e.component)&&e.online),children:Object(b.jsx)(he.a,{})}),Object(b.jsx)(K.a,{onClick:o("virtualTilt",!1),disabled:!(t.connected&&!n.busyComps.has(e.component)&&e.online),children:Object(b.jsx)(pe.a,{})})]})},ge=function(e){var t=Object(c.useState)(!0),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(f.b)(),u=Object(c.useRef)(),m=Object(S.a)({palette:{mode:"dark",primary:{light:"#01bd7d",main:"#01bd7d",dark:"#01bd7d",contrastText:"#01bd7d"}}});return u.current=function(){return l||(l=!0,d(!0),j.socket.emit("command",{userId:j.username,componentId:e.component,command:"getStatus"}),j.socket.emit("getFooter",e.component),j.socket.on("getFooter",(function(t){t.componentId===e.component&&(s(!0),e.newStatus(String(t.status)))})),j.socket.on("status",(function(t){t.componentId===e.component&&console.log("Status of settings:   ",t)})),j.socket.on("footer",(function(t){t.componentId===e.component&&e.newStatus(String(t.status))})),l=!1,d(!1)),function(){l=!1,d(!1)}},Object(c.useEffect)((function(){u.current()}),[j.socket]),Object(b.jsxs)(w.a,{theme:m,children:[Object(b.jsx)("div",{className:be.a.UpDown,children:Object(b.jsx)(fe,{component:e.component,online:a})}),Object(b.jsx)("div",{className:be.a.LeftRight,children:Object(b.jsx)(je,{component:e.component,online:a})}),Object(b.jsxs)(C.a,{sx:{m:2,width:250},children:[" ",Object(b.jsx)("h1",{children:"Settings"})," "]}),Object(b.jsx)(G,{title:"Resolution",component:e.component,online:a,command:"frame size"}),Object(b.jsx)(L,{component:e.component,command:"gray",start:"Color",end:"Grey",online:!0,option:"val"}),Object(b.jsx)(F,{title:"Contrast",component:e.component,command:"contrast",min:-2,max:2,online:a,option:"val"}),Object(b.jsx)(F,{title:"Brightness",component:e.component,command:"brightness",min:-2,max:2,online:a,option:"val"})]})},xe=n(195),Se=n.n(xe),we=function(e){var t=Object(c.useState)(e.footer),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(["","",""]),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)("info"),u=Object(o.a)(j,2),m=u[0],g=u[1],x=Object(c.useState)(!1),S=Object(o.a)(x,2),w=S[0],v=S[1],C=Object(c.useState)(!1),y=Object(o.a)(C,2),k=y[0],_=y[1],I=Object(f.b)(),M=Object(O.b)(),L=Object(p.b)(),R=Object(c.useRef)(),N=Object(c.useRef)(),P=function(e){if(!k){k=!0,_(!0);var t=new Date;d([t.getHours(),t.getMinutes(),t.getSeconds(),t.getDay(),t.getMonth()]),s(e)}return function(){k=!1,_(!1)}};return R.current=function(){I.socket.on("data",(function(e){for(var t=new Uint8Array(e.data.data),n="",o=0;o<t.length;o++)n+=String.fromCharCode(t[o]);var c=window.btoa(n),a=new Image;a.onload=function(){var e=document.getElementById("ScreenCanvas");if(null!=e){e.getContext("2d").drawImage(this,0,0,300,200)}},a.src="data:image/jpg;base64,"+c}))},N.current=function(){I.socket.emit("join stream room",{id:e.id,userId:I.username})},Object(c.useEffect)((function(){R.current()}),[I.socket]),Object(c.useEffect)((function(){N.current()}),[]),Object(b.jsxs)(h,{header:e.title+" ("+e.id+")",top:e.top,left:e.left,width:"1000px",height:"430px",onClose:function(){M.toggleSelectedComp(e.id),I.socket.emit("leave stream room",{id:e.id,userId:I.username})},onReset:function(){I.socket.emit("command",{userId:I.username,componentId:e.id,command:"reset"})},onInfo:function(){var e,t,n=new Date,o=0;w="",n=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getDay(),n.getMonth()],""===l[0]?w="No last change detected!":n[0]>l[0]?(e=n[0]-l[0],w="Last change is more than "+e+" h ago!"):n[0]===l[0]&&n[1]===l[1]&&n[2]>l[2]?(o=n[2]-l[2],w="Last change is "+o+" s ago!"):n[0]===l[0]&&n[1]>l[1]?(t=n[1]-l[1],w="Last change is more than "+t+" min ago!"):w=n[3]>l[3]||n[4]>l[4]?"Last change is more than 24 h ago!":"No last change detected!",v(w),g("info"),L.toggleShowPopUp(w,m)},footer:a,newStatus:P,children:[Object(b.jsx)("div",{className:Se.a.Canvas,children:Object(b.jsx)("canvas",{id:"ScreenCanvas"})}),Object(b.jsx)("div",{className:Se.a.Settings,children:Object(b.jsx)(ge,{component:e.id,footer:a,newStatus:P})})]})},ve=function(e){var t=Object(c.useState)(!0),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(f.b)(),u=Object(c.useRef)(),m=Object(S.a)({palette:{mode:"dark",primary:{light:"#01bd7d",main:"#01bd7d",dark:"#01bd7d",contrastText:"#01bd7d"}}});return u.current=function(){return l||(l=!0,d(!0),j.socket.emit("command",{userId:j.username,componentId:e.component,command:"getStatus"}),j.socket.emit("getFooter",e.component),j.socket.on("getFooter",(function(t){t.componentId===e.component&&(s(e.online),e.newStatus(String(t.status)))})),j.socket.on("status",(function(t){t.componentId===e.component&&console.log("Status of settings:   ",t)})),j.socket.on("footer",(function(t){t.componentId===e.component&&e.newStatus(String(t.status))})),l=!1,d(!1)),function(){l=!1,d(!1)}},Object(c.useEffect)((function(){u.current()}),[j.socket]),Object(b.jsx)(w.a,{theme:m,children:Object(b.jsx)(C.a,{sx:{mx:1},children:Object(b.jsx)(F,{title:"Glas option",component:e.component,min:0,max:2,command:"glas",text:[{value:0,label:"None"},{value:1,label:"Glas"},{value:2,label:"Laser"}],online:a,option:"pos"})})})},Ce=function(e){var t=Object(c.useState)(e.footer),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(["","",""]),r=Object(o.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)("info"),u=Object(o.a)(j,2),m=u[0],g=u[1],x=Object(c.useState)(!1),S=Object(o.a)(x,2),w=S[0],v=S[1],C=Object(c.useState)(!1),y=Object(o.a)(C,2),k=y[0],_=y[1],I=Object(O.b)(),M=Object(f.b)(),L=Object(p.b)();return Object(b.jsx)(h,{header:e.title+" ("+e.id+")",footer:a,top:e.top,left:e.left,height:"140px",width:"320px",onClose:function(){I.toggleSelectedComp(e.id)},onReset:function(){M.socket.emit("command",{userId:M.username,componentId:e.id,command:"reset"})},onInfo:function(){var e,t,n=new Date,o=0;w="",n=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getDay(),n.getMonth()],""===l[0]?w="No last change detected!":n[0]>l[0]?(e=n[0]-l[0],w="Last change is more than "+e+" h ago!"):n[0]===l[0]&&n[1]===l[1]&&n[2]>l[2]?(o=n[2]-l[2],w="Last change is "+o+" s ago!"):n[0]===l[0]&&n[1]>l[1]?(t=n[1]-l[1],w="Last change is more than "+t+" min ago!"):w=n[3]>l[3]||n[4]>l[4]?"Last change is more than 24 h ago!":"No last change detected!",v(w),g("info"),L.toggleShowPopUp(w,m)},children:Object(b.jsx)(ve,{rotation:e.rotationTop,component:e.id,control:"top",newStatus:function(e){if(!k){k=!0,_(!0);var t=new Date;s(e),d([t.getHours(),t.getMinutes(),t.getSeconds(),t.getDay(),t.getMonth()])}return function(){k=!1,_(!1)}},footer:a,top:"20",left:"160"})})},ye=function(e){var t="Initializing...",n="0",o=window.innerHeight,c=window.innerWidth,a=c/2,s=String(o-o/3*2.7),i=String(o-o/1.4),r=String(o-o/2.15),l=String(c-1.9*a),d=String(c-1.8*a),j=String(c-.47*a),u=String(c-.4*a),m=String(c-1.485*a),h=["Michelson_KM100","Michelson_linear","Michelson_laser","Michelson_LaserPower","Michelson_cam","Michelson_heater","Cam_1","Michelson_beamSplitter"];return Object(b.jsxs)("div",{children:[e.selected.has(h[0])&&Object(b.jsx)(ce,{title:"Mirror",id:h[0],rotationTop:n,rotationBottom:n,footer:t,top:s,left:l}),e.selected.has(h[1])&&Object(b.jsx)(se,{title:"Mirror Stage",id:h[1],footer:t,rotation:n,top:r,left:d}),e.selected.has(h[2])&&Object(b.jsx)(ce,{title:"Laser",id:h[2],rotationTop:n,rotationBottom:n,footer:t,top:r,left:u}),e.selected.has(h[3])&&Object(b.jsx)(N,{title:"Power Supply",id:h[3],footer:t,top:s,left:j}),e.selected.has(h[4])&&Object(b.jsx)(we,{title:"Screen",id:h[4],footer:t,top:i,left:m}),e.selected.has(h[5])&&Object(b.jsx)(Y,{title:"Heater",id:h[5],footer:t,top:i,left:m}),e.selected.has(h[6])&&Object(b.jsx)(x,{title:"Cam_1",id:h[6],footer:t,top:i,left:m}),e.selected.has(h[7])&&Object(b.jsx)(Ce,{title:"Glas",id:h[7],footer:t,top:r,left:a})]})},ke=n(288),_e=n.n(ke),Ie=n.p+"static/media/xrtl_team.519a843e.png",Me=function(e){return Object(b.jsxs)("div",{className:_e.a.mainWrapper,style:{backgroundImage:'url("'+Ie+'")'},children:["Remote labs are a trendsetting way of teaching, communicating, and experiencing science as well as enabling collaborative work. Unfortunately, the implementation of remote access involves a cost-intensive development or at least requires a certain technical skillset. To establish remote labs across disciplines, especially outside the field of IT and engineering, the technical access threshold must be low enough to support a self-contained implementation by researchers, assistants, and technical staff. Hereby, we are developing the open-source toolbox XR Twin Lab for the research field of Photonics. XR Twin Lab (XRTL) provides a modular way of building a web-based application to control optical experimental setups with the integration of VR and AR endpoints.",Object(b.jsxs)("p",{children:['This Project is currently developed within the DAAD-funded project "digiPhoton" and BMBF-funded project "Lichtwerkstatt" at the Abbe School of Photonics / Institute of Applied Physics / Friedrich Schiller University in Jena. Feel free to follow our ',Object(b.jsx)("a",{href:"https://github.com/Lichtwerkstatt/XRTL_SPA",children:"Git Repo"})," or ",Object(b.jsx)("a",{href:"mailto:team@lichtwerkstatt-jena.de",children:"Contact us."})]}),Object(b.jsx)("p",{children:"Best! Clara, Falko, Jari and Johannes"})]})},Le=function(e){var t=Object(O.b)();return Object(b.jsx)(h,{header:"About XR TwinLab",top:"250",left:"200",width:"600px",onClose:function(){t.toggleShowInfoWindow()},children:Object(b.jsx)(Me,{})})},Re=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],i=Object(f.b)(),r=Object(p.b)(),l=Object(O.b)(),d=Object(c.useRef)();return d.current=function(){i.socket.on("Auth",(function(){r.toggleShowPopUp("Connection successful!","success"),s(!0)})),n||(r.toggleShowPopUp("No server connection!","error"),s(""))},Object(c.useEffect)((function(){d.current()}),[i.socket]),Object(b.jsxs)(a.a.Fragment,{children:[l.showInfoWindow&&Object(b.jsx)(Le,{}),Object(b.jsx)(ye,{toggleSelect:l.toggleSelectedComp,selected:l.selectedComps})]})};t.a=Object(c.memo)(Re,u.isEqual)},290:function(e,t,n){"use strict";var o=n(23),c=n(1),a=n(507),s=n(500),i=n(499),r=n(41),l=n(2),d=function(e){return Object(l.jsxs)(i.a,{position:e.position,style:{color:"white",width:"200px",height:"30px"},zIndexRange:[0,10],children:[Object(l.jsx)("div",{style:{height:"150px",width:"0px",borderLeft:"2px solid white",float:"left"}}),Object(l.jsxs)("div",{style:{marginLeft:"12px"},children:[Object(l.jsx)("span",{children:Object(l.jsx)("b",{children:e.title})}),Object(l.jsx)("br",{}),e.description,Object(l.jsx)("br",{}),e.status]})]})},j=Object(c.memo)(d,r.isEqual);function u(e){var t=Object.assign({},e),n=Object(c.useRef)(),i=Object(a.a)("/model/MI_110422.glb"),r=i.nodes,d=i.materials;return Object(l.jsx)("group",Object(o.a)(Object(o.a)({ref:n},t),{},{dispose:null,children:Object(l.jsxs)("group",{name:"Scene",children:[Object(l.jsxs)("group",{name:"Optical elements",children:[Object(l.jsx)(s.a,{position:[-.55,.66,-.1],args:[1,1,1],scale:[.25,.25,.25],children:Object(l.jsx)("meshPhysicalMaterial",{thickness:1,roughness:.1,transmission:1,clearcoat:.5,clearcoatRoughness:0,ior:1.1,envMapIntensity:25,color:"#ffffff",attenuationColor:"#00ffff",attenuationDistance:5})}),Object(l.jsx)(s.b,{position:[.7,.67,-.13],args:[1,1,1],rotation:[0,0,Math.PI/2],scale:[.14,.05,.14],children:Object(l.jsx)("meshPhysicalMaterial",{thickness:1,roughness:.1,transmission:1,clearcoat:.5,clearcoatRoughness:0,ior:1.1,envMapIntensity:25,color:"#ffffff",attenuationColor:"#00ffff",attenuationDistance:5})})]}),Object(l.jsxs)("group",{name:"Mirror1",position:[-.53,.67,.94],onPointerDown:function(e){e.stopPropagation(),t.toggleSelect("Michelson_KM100")},children:[t.showTags&&Object(l.jsx)(j,{position:[0,1.3,0],title:"Reference Mirror",description:"KM100 Double Rotary Control"}),Object(l.jsx)("mesh",{name:"SideMirrorMesh",castShadow:!0,receiveShadow:!0,geometry:r.SideMirrorMesh.geometry,material:d.BlackParts,children:t.selected.has("Michelson_KM100")?Object(l.jsx)("meshStandardMaterial",{color:"#00ff00",transparent:!0,opacity:.7}):Object(l.jsx)("meshBasicMaterial",{color:"#222222",opacity:1})}),Object(l.jsx)("mesh",{name:"SideMirrorMesh_1",castShadow:!0,receiveShadow:!0,geometry:r.SideMirrorMesh_1.geometry,material:d.ShinyParts}),Object(l.jsx)("mesh",{name:"SideMirrorMesh_2",castShadow:!0,receiveShadow:!0,geometry:r.SideMirrorMesh_2.geometry,material:d.Mirror})]}),Object(l.jsxs)("group",{name:"TranslateMirror",position:[-1.71,.67,-.12],onPointerDown:function(e){e.stopPropagation(),t.toggleSelect("Michelson_linear")},children:[t.showTags&&Object(l.jsx)(j,{position:[0,1.3,0],title:"Transtlate Mirror",description:"Linear Stage"}),Object(l.jsx)("mesh",{name:"TranslateMirrorMesh",castShadow:!0,receiveShadow:!0,geometry:r.TranslateMirrorMesh.geometry,material:d.BlackParts,children:t.selected.has("Michelson_linear")?Object(l.jsx)("meshStandardMaterial",{color:"#00ff00",transparent:!0,opacity:.7}):Object(l.jsx)("meshBasicMaterial",{color:"#222222",opacity:1})}),Object(l.jsx)("mesh",{name:"TranslateMirrorMesh_1",castShadow:!0,receiveShadow:!0,geometry:r.TranslateMirrorMesh_1.geometry,material:d.ShinyParts}),Object(l.jsx)("mesh",{name:"TranslateMirrorMesh_2",castShadow:!0,receiveShadow:!0,geometry:r.TranslateMirrorMesh_2.geometry,material:d.Mirror})]}),Object(l.jsxs)("group",{name:"Schirm",position:[-.37,.86,-1.22],onPointerDown:function(e){e.stopPropagation(),t.toggleSelect("Michelson_cam")},children:[t.showTags&&Object(l.jsx)(j,{position:[0,1.5,0],title:"Screen",description:"Screen with Interference Pattern"}),Object(l.jsx)("mesh",{name:"PlaneMesh",castShadow:!0,receiveShadow:!0,geometry:r.PlaneMesh.geometry,children:t.selected.has("Michelson_cam")?Object(l.jsx)("meshStandardMaterial",{color:"#00ff00",transparent:!0,opacity:.7}):Object(l.jsx)("meshBasicMaterial",{color:"#eeeeee",opacity:1})}),Object(l.jsx)("mesh",{name:"PlaneMesh_1",castShadow:!0,receiveShadow:!0,geometry:r.PlaneMesh_1.geometry,material:d.BlackParts})]}),Object(l.jsxs)("group",{name:"Base",children:[t.showTags&&Object(l.jsx)(j,{position:[-.5,2,-.1],title:"Beam Splitter",description:"50/50 Beam Splitter"}),t.showTags&&Object(l.jsx)(j,{position:[.6,2,-.1],title:"Lens",description:"Lens for Beam Widening"}),Object(l.jsx)("mesh",{name:"BaseMesh",castShadow:!0,receiveShadow:!0,geometry:r.BaseMesh.geometry,material:d.BlackParts}),Object(l.jsx)("mesh",{name:"BaseMesh_1",castShadow:!0,receiveShadow:!0,geometry:r.BaseMesh_1.geometry,material:d.ShinyParts})]}),Object(l.jsxs)("group",{name:"Laser",position:[1.56,.67,.14],onPointerDown:function(e){e.stopPropagation(),t.toggleSelect("Michelson_laser")},children:[t.showTags&&Object(l.jsx)(j,{position:[0,1.2,-.2],title:"Laser Alignment",description:"KM100 Double Rotary Control"}),Object(l.jsx)("mesh",{name:"LaserMesh",castShadow:!0,receiveShadow:!0,geometry:r.LaserMesh.geometry,material:d.BlackParts,children:t.selected.has("Michelson_laser")?Object(l.jsx)("meshStandardMaterial",{color:"#00ff00",transparent:!0,opacity:.7}):Object(l.jsx)("meshBasicMaterial",{color:"#222222",opacity:1})}),Object(l.jsx)("mesh",{name:"LaserMesh_1",castShadow:!0,receiveShadow:!0,geometry:r.LaserMesh_1.geometry,material:d.ShinyParts})]}),Object(l.jsxs)("mesh",{name:"SD5",castShadow:!0,receiveShadow:!0,geometry:r.SD5.geometry,material:d.BlackParts,position:[1.61,.25,-.9],onPointerDown:function(e){e.stopPropagation(),t.toggleSelect("Michelson_LaserPower")},children:[t.showTags&&Object(l.jsx)(j,{position:[0,1.3,0],title:"Power Supply",description:"5V Laser Power Supply"}),t.selected.has("Michelson_LaserPower")?Object(l.jsx)("meshStandardMaterial",{color:"#00ff00",transparent:!0,opacity:.7}):Object(l.jsx)("meshBasicMaterial",{color:"#222222",opacity:1})]}),t.showBeam&&Object(l.jsx)("mesh",{name:"LaserBeam",castShadow:!0,receiveShadow:!0,geometry:r.LaserBeam.geometry,material:d.Laser,position:[-.3,.66,-.15]})]})}))}a.a.preload("/model/MI_110422.glb");var b=Object(c.memo)(u,r.isEqual),m=n(510),h=n(511),O=n(27),p=n(30);t.a=function(){var e=Object(O.b)();return e.showVirtualLayer?Object(l.jsx)(p.a,{style:{position:"absolute",background:"linear-gradient(Teal, Black)",width:"100%",height:"100%"},colorManagement:!0,softShadows:!0,camera:{position:[0,3,5],fov:40},children:Object(l.jsxs)(c.Suspense,{fallback:null,children:[Object(l.jsx)(m.a,{files:"../hdri/autoshop.hdr"}),Object(l.jsx)(h.a,{autoRotate:e.autoRotate}),Object(l.jsx)(b,{toggleSelect:e.toggleSelectedComp,selected:e.selectedComps,showTags:e.showTags,showBeam:e.showBeam})]})}):Object(l.jsx)(l.Fragment,{})}},298:function(e,t,n){"use strict";n.r(t);n(1);var o=n(46),c=n.n(o),a=n(266),s=(n(436),n(2));c.a.render(Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(a.a,{})}),document.getElementById("root"))},319:function(e,t){},321:function(e,t){},335:function(e,t){},337:function(e,t){},35:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return b}));var o=n(8),c=n(25),a=n(1),s=n(447),i=n(446),r=n(282),l=n.n(r),d=n(2),j=Object(a.createContext)();function u(){return Object(a.useContext)(j)}function b(e){var t=e.children,n=Object(a.useState)(!1),r=Object(o.a)(n,2),u=r[0],b=r[1],m=Object(a.useState)(""),h=Object(o.a)(m,2),O=h[0],p=h[1],f=Object(a.useState)("info"),g=Object(o.a)(f,2),x=g[0],S=g[1];Object(c.b)().socket.on("error",(function(e){b(!0),p(e.errmsg),S("error")}));return Object(d.jsxs)(j.Provider,{value:{showPopUp:u,toggleShowPopUp:function(e,t){p(e),S(t),b(!u)}},children:[Object(d.jsx)(s.a,{open:u,autoHideDuration:2e3,onClose:function(e,t){"clickaway"!==t&&b(!1)},children:Object(d.jsx)("div",{className:l.a.popUp,children:Object(d.jsx)(i.a,{variant:"filled",severity:x,onClose:function(){b(!1)},children:O})})}),t]})}},365:function(e,t){},367:function(e,t){},368:function(e,t){},373:function(e,t){},375:function(e,t){},394:function(e,t){},406:function(e,t){},409:function(e,t){},436:function(e,t,n){},67:function(e,t,n){e.exports={Temp:"HeaterCtrl_Temp__8Du_1",Heater:"HeaterCtrl_Heater__fmsIn",Switch:"HeaterCtrl_Switch__3cXgO",Canvas1:"HeaterCtrl_Canvas1__HF34-",Canvas2:"HeaterCtrl_Canvas2__ZQFSu"}},86:function(e,t,n){e.exports={chatContainer:"Chat_chatContainer__26qIN",chatMain:"Chat_chatMain__1zSUi",msgForm:"Chat_msgForm__3zrhr",chatHandler:"Chat_chatHandler__2wAbt",openChat:"Chat_openChat__3kAnz",closeChat:"Chat_closeChat__a-LQe",buttonBlink:"Chat_buttonBlink__juA-h"}}},[[298,1,2]]]);
//# sourceMappingURL=main.bc401c70.chunk.js.map